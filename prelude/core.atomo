macro x match: (ts: Block) :=
  { obj = Object clone

    @match-on: define-on: obj with: [`x as: Pattern] as:
      `(raise: @(no-matches-for: x))

    ts contents each:
      { `(~p -> ~e) |
        @match-on: define-on: obj with: [p as: Pattern] as:
          `({ delegates-to: sender; ~e } call) in: Lobby
      }

    `(~obj match-on: ~x)
  } call
